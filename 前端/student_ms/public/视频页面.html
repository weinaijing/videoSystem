<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>视频页面</title>
    <link rel="stylesheet" href="component/pear/clientcss/bootstrap.min.css">
    <link rel="stylesheet" href="component/pear/clientcss/font-awesome.css">
    <link rel="stylesheet" href="component/pear/clientcss/视频页面.css" />
    <script src="component/JQ/js/jquery.js"></script>
    <script src="component/layui/layui.js"></script>
    <script src="component/boostrap/js/bootstrap.min.js"></script>
</head>

<body>

    <!-- 导航栏 -->
    <div class="topnav">
        <nav class="navbar navbar-default" role="navigation">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" href="./首页.html" style="color: black;">主站</a>
                </div>
                <div class="navbarleft">
                    <!-- 左边导航部分 -->
                    <ul class="nav navbar-nav">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="color: black;">
                                漫画
                                <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="#">热门直播</a></li>
                                <li class="divider"></li>
                                <li><a href="#">热门活动</a></li>
                            </ul>
                        </li>


                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="color: black;">
                                游戏中心
                                <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="#">热门直播</a></li>
                                <li class="divider"></li>
                                <li><a href="#">热门活动</a></li>
                            </ul>
                        </li>

                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="color: black;">
                                直播
                                <span class="badge" style="background: red;">99+</span>
                                <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="#">热门直播<span class="badge" style="background: red;">99+</span></a></li>
                                <li class="divider"></li>
                                <li><a href="#">热门活动<span class="badge" style="background: red;">36</span></a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="#" style="color: black;">番剧</a>
                        </li>
                        <li>
                            <a href="#" style="color: black;">会员购</a>
                        </li>
                        <li>
                            <a href="#" style="color: black;">赛事</a>
                        </li>
                    </ul>
                </div>
                <!-- 右边导航部分 -->
                <div class="navbarright">
                    <ul class="nav navbar-nav">
                        <li>
                            <a href="#" style="color: black;">消息</a>
                        </li>
                        <li>
                            <a href="#" style="color: black;">动态</a>
                        </li>
                        <li>
                            <a href="#" style="color: black;">历史</a>
                        </li>
                        <li>
                            <a href="#" style="color: black;">创作</a>
                        </li>
                        <li class="downloadBtn">
                            <a href="#" style="color: black;"><span>下载客户端</span></a>
                            <div class="download">
                                <div class="erweima">
                                    <h4>手机端</h4>
                                    <span>扫码下载手机app</span>
                                    <img src="component/images/erweima.png" alt="" style="margin-top:20px">
                                </div>
                                <div class="btndownload">
                                    <h4>Windows端</h4>
                                    <span>点击按钮下载</span>
                                    <img src="component/images/bililogo.png" alt=""
                                        style="width: 230px; margin: 10px 0;">
                                    <button>立即下载</button>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <!-- 搜索框1 -->
                <div class="wrap1">
                    <div class="search">
                        <input type="text" class="searchTerm" placeholder="你想找什么?">
                        <button type="submit" class="searchButton">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>
                </div>
            </div>
        </nav>
    </div>
    <!-- 视频标题和up -->
    <div class="title">
        <div class="titleleft">
            <!-- 标题 -->
            <div class="videotitle">
                <h4 id="videoname"></h4>
            </div>
            <!-- 视频数据 -->
            <div class="videodata">
                <div class="bofangliang">
                    <span class="glyphicon glyphicon-expand">35.6万</span>
                </div>
                <div class="danmuliang">
                    <span class="glyphicon glyphicon-comment">999</span>
                </div>
                <div class="faburiqi">
                    <span class="glyphicon glyphicon-time" id="videotime"></span>
                </div>
                <div class="jinggao">
                    <span class="glyphicon glyphicon-exclamation-sign">未经作者授权，禁止转载</span>
                </div>
            </div>
        </div>
        <div class="titleright">
            <!-- 分行1 -->
            <div>
                <div class="upheadshot">
                    <img src="" alt="" id="touxiang" style="max-width: 80px;">
                </div>
            </div>
            <!-- 分行2 -->
            <div>
                <div class="upname">
                    <span id="username"></span>
                </div>
                <!-- <div class="qianming">
                    <span>这个人很懒什么也没有留下</span>
                </div> -->
            </div>
            <!-- 充电、关注 -->
            <div class="panlebtn">
                <a href="">
                    <div class="chongdian">
                        <span>充电</span>
                    </div>
                    <div class="guanzhu">
                        <span>+ 关注</span>
                    </div>
                </a>
            </div>
        </div>
    </div>
    <!-- 视频 -->
    <div class="video">
        <div class="embed-responsive embed-responsive-16by9">
            <video width="320" height="240" controls="controls" autoplay="autoplay" src="" id="videocontent">

            </video>
            <!-- <h2 style="text-align: center;
            line-height: 500px;">糟糕，视频找不到了！</h2> -->
        </div>
    </div>
    <!-- 点赞、投币、收藏、转发 -->
    <div class="controlbar">
        <div class="dianzan">
            <a href="#"><span>点赞</span></a>
        </div>
        <div class="toubi">
            <a href="#"><span>投币</span></a>
        </div>
        <div class="shoucang">
            <a href="#"><span>收藏</span></a>
        </div>
        <div class="zhuanfa">
            <a href="#"><span>转发</span></a>
        </div>
        <!-- 按钮触发模态框 -->
        <button class="btn btn-danger" data-toggle="modal" data-target="#myModal" style="margin-bottom: 10px;">举报</button>
        <!-- 模态框（Modal） -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
            aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="myModalLabel">举报理由</h4>
                    </div>
                    <div class="modal-body"><input type="text" id="reason" placeholder="请输入举报理由"></div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary report">提交</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>
        <!-- <div class="report">
            <a href="#"><span>举报</span></a>
        </div> -->
    </div>

</body>

<script>
    UrlParam = function () { // url参数
        var data, index;
        (function init() {
            data = [];    //值，如[["1","2"],["zhangsan"],["lisi"]]
            index = {};   //键:索引，如{a:0,b:1,c:2}
            var u = window.location.search.substr(1);
            if (u != '') {
                var params = decodeURIComponent(u).split('&');
                for (var i = 0, len = params.length; i < len; i++) {
                    if (params[i] != '') {
                        var p = params[i].split("=");
                        if (p.length == 1 || (p.length == 2 && p[1] == '')) {// p | p= | =
                            data.push(['']);
                            index[p[0]] = data.length - 1;
                        } else if (typeof (p[0]) == 'undefined' || p[0] == '') { // =c 舍弃
                            continue;
                        } else if (typeof (index[p[0]]) == 'undefined') { // c=aaa    
                            data.push([p[1]]);
                            index[p[0]] = data.length - 1;
                        } else {// c=aaa    
                            data[index[p[0]]].push(p[1]);
                        }
                    }
                }
            }
        })();
        return {
            // 获得参数,类似request.getParameter()    
            param: function (o) { // o: 参数名或者参数次序
                try {
                    return (typeof (o) == 'number' ? data[o][0] : data[index[o]][0]);
                } catch (e) {
                }
            },
            //获得参数组, 类似request.getParameterValues()    
            paramValues: function (o) { //  o: 参数名或者参数次序
                try {
                    return (typeof (o) == 'number' ? data[o] : data[index[o]]);
                } catch (e) { }
            },
            //是否含有paramName参数
            hasParam: function (paramName) {
                return typeof (paramName) == 'string' ? typeof (index[paramName]) != 'undefined' : false;
            },
            // 获得参数Map ,类似request.getParameterMap()    
            paramMap: function () {
                var map = {};
                try {
                    for (var p in index) { map[p] = data[index[p]]; }
                } catch (e) { }
                return map;
            }
        }
    }();

    let id = UrlParam.paramValues("id");
    $.ajax({
        url: "getUserById/" + id,
        // data : {id:upname},
        type: "get", //请求方式
        success: function (data) {
            //请求成功的回调的函数

            console.log(data.id);
            console.log(data.data.uptouxiang);
            $("#touxiang").attr("src", data.data.uptouxiang)
            $("#touxiang").val(data.data.uptouxiang)
            $("#videocontent").attr("src", data.data.videocontent)
            $("#videocontent").val(data.data.videocontent)

            document.getElementById('username').innerHTML = data.data.upname;
            document.getElementById('videoname').innerHTML = data.data.videoname;
            document.getElementById('videotime').innerHTML = data.data.videotime;

        },
        error: function (data) {
            //请求失败的回调函数
        }

    })
</script>
<script>
    $(".report").on("click", function () {

        var videoname = document.getElementById('videoname').innerText
        var videocontent = $("#videocontent").attr("src")
        var upname = document.getElementById('username').innerText
        var videotime = document.getElementById('videotime').innerText
        var uptouxiang = $("#touxiang").attr("src")
        var reason = $("#reason").val()
        console.log(videoname);
        console.log(videocontent);
        console.log(upname);
        console.log(videotime);
        console.log(uptouxiang);
        console.log(reason);
        $.ajax({
            url: "ReportVideo",
            data: {
                videoname: videoname,
                videocontent: videocontent,
                upname: upname,
                videotime: videotime,
                uptouxiang: uptouxiang,
                reason:reason
            },
            type: "post",
            success: function (data) {
                location.reload()
                layer.msg("举报成功")
            }
        })

    })
</script>

</html>